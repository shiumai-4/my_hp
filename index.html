<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>URLç´¹ä»‹webãƒšãƒ¼ã‚¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #fafbfc;
      color: #222;
      margin: 0;
      padding: 0;
    }
    body.dark {
      background: #23272f;
      color: #eee;
    }
    .main-wrapper {
      max-width: 800px;
      margin: 32px auto 0 auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 24px #0001;
      padding: 2em 1.5em 2em 1.5em;
      min-height: 90vh;
      position: relative;
    }
    body.dark .main-wrapper {
      background: #1b1e24;
      box-shadow: 0 4px 24px #0005;
    }
    h1 {
      font-size: 1.96em; /* 1.4å€ã«æ‹¡å¤§ */
      margin: 0 0 1.3em 0;
      letter-spacing: 0.04em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      text-align: center;
    }
    .favicon-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px 16px;
      margin-bottom: 6px;
      padding: 4px 0 4px 0;
      justify-content: center; /* è¿½åŠ : ä¸­å¤®æƒãˆ */
    }
    .favicon-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: #f3f4f6;
      box-shadow: 0 1px 4px #0001;
      transition: background 0.18s, box-shadow 0.18s;
      margin: 0;
      text-decoration: none;
    }
    .favicon-link:hover {
      background: #ffeaa7;
      box-shadow: 0 0px 8px #FFD60044;
    }
    body.dark .favicon-link {
      background: #313948;
      box-shadow: 0 1px 4px #0004;
    }
    body.dark .favicon-link:hover {
      background: #23272e;
      box-shadow: 0 0px 8px #ffd50086;
    }
    .favicon-img {
      width: 20px;
      height: 20px;
      display: block;
      border-radius: 4px;
    }
    .topbar-flex {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
      width: 100%;
    }
    .dark-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
      margin: 0;
    }
    .favorite-toggle-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }
    .favorite-toggle-area {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      flex: 1 1 auto;
    }
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 38px;
      height: 22px;
      margin: 0 2px;
    }
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
      pointer-events: none;
    }
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #a4baff;
      border-radius: 22px;
      transition: background 0.2s;
    }
    .toggle-slider:before {
      content: "";
      position: absolute;
      left: 3px; top: 3px;
      width: 16px; height: 16px;
      background: #fff;
      border-radius: 50%;
      transition: transform 0.2s, background 0.2s;
      box-shadow: 0 1px 4px #0002;
    }
    .toggle-switch input:checked + .toggle-slider {
      background: #3476e6;
    }
    .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(16px);
      background: #8ecaff;
    }
    .favorite-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0 0.2em;
      margin-left: 0.5em;
      display: flex;
      align-items: center;
      transition: color 0.2s, transform 0.15s;
      font-size: 1.5em;
      color: #bbb;
      position: absolute;
      right: 10px;
      top: 10px; /* å¤‰æ›´: ä¸Šã‹ã‚‰ã®ä½ç½®ã‚’å›ºå®š */
      transform: none; /* å¤‰æ›´: å‚ç›´ä½ç½®ã®èª¿æ•´ã‚’å‰Šé™¤ */
    }
    .favorite-btn.faved {
      color: #FFD600;
      text-shadow: 0 0 4px #FFD60088;
    }
    .favorite-btn:hover,
    .favorite-btn:focus-visible {
      outline: none;
      transform: scale(1.25) translateY(-10%);
    }
    body.dark .favorite-btn,
    body.dark .favorite-toggle-btn {
      color: #666;
    }
    body.dark .favorite-btn.faved,
    body.dark .favorite-toggle-btn.on {
      color: #FFD600;
      text-shadow: 0 0 6px #FFD60055;
    }
    body.dark .favorite-btn:hover,
    body.dark .favorite-btn:focus-visible {
      outline: none;
      transform: scale(1.25) translateY(-10%);
    }
    .favorite-btn svg, .favorite-toggle-btn svg {
      width: 1em; height: 1em;
      display: block;
    }
    .favorite-toggle-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.7em;
      color: #bbb;
      padding: 0;
      margin: 0;
      display: flex;
      align-items: center;
      transition: color 0.2s, opacity 0.2s;
      opacity: 1;
      position: relative;
      z-index: 12;
    }
    .favorite-toggle-btn.on {
      color: #FFD600;
      text-shadow: 0 0 6px #FFD60055;
    }
    .favorite-toggle-btn:disabled {
      color: #bbb;
      opacity: 0.4;
      cursor: not-allowed;
      text-shadow: none;
    }
    .genre-header {
      font-weight: bold;
      font-size: 1.08em;
      cursor: pointer;
      padding: 0.7em 0.4em 0.7em 0.9em;
      border-radius: 7px 7px 0 0;
      background: #f7f7f7;
      user-select: none;
      transition: background 0.17s;
      margin-bottom: 0;
    }
    .genre-header.shrink.genre1 { background: #fff9e0; }
    .genre-header.shrink.genre2 { background: #e3f6f1; }
    .genre-header.shrink.genre3 { background: #e7f1fe; }
    .genre-header.shrink.genre4 { background: #ffe5f0; }
    .genre-header.shrink.genre5 { background: #ffe9e5; }
    .genre-header.shrink.genre6 { background: #eae5ff; }
    .genre-header.shrink.genre7 { background: #dee1e3; }
    .genre-header.shrink.genre8 { background: #e5f3ff; }
    .genre-header.genre1 { background: #f7f7f7; }
    .genre-header.genre2 { background: #f7f7f7; }
    .genre-header.genre3 { background: #f7f7f7; }
    .genre-header.genre4 { background: #f7f7f7; }
    .genre-header.genre5 { background: #f7f7f7; }
    .genre-header.genre6 { background: #f7f7f7; }
    .genre-header.genre7 { background: #f7f7f7; }
    .genre-header.genre8 { background: #f7f7f7; }
    body.dark .genre-header { background: #23272f; }
    body.dark .genre-header.shrink.genre1 { background: #544800; }
    body.dark .genre-header.shrink.genre2 { background: #004d3a; }
    body.dark .genre-header.shrink.genre3 { background: #00305f; }
    body.dark .genre-header.shrink.genre4 { background: #5e0032; }
    body.dark .genre-header.shrink.genre5 { background: #5e1d00; }
    body.dark .genre-header.shrink.genre6 { background: #2e005e; }
    body.dark .genre-header.shrink.genre7 { background: #373734; }
    body.dark .genre-header.shrink.genre8 { background: #00375e; }
    .genre-line {
      height: 3px;
      border-radius: 2px;
      margin: 0 0 13px 0;
      background: #eee;
    }
    .genre1 { background: linear-gradient(90deg,#FFD600,#FFD60088); }
    .genre2 { background: linear-gradient(90deg,#00b894,#00b89466); }
    .genre3 { background: linear-gradient(90deg,#0984e3,#0984e344); }
    .genre4 { background: linear-gradient(90deg,#fd79a8,#fd79a855); }
    .genre5 { background: linear-gradient(90deg,#e17055,#e1705555); }
    .genre6 { background: linear-gradient(90deg,#6c5ce7,#6c5ce744); }
    .genre7 { background: linear-gradient(90deg,#b2bec3,#b2bec344); }
    .genre8 { background: linear-gradient(90deg,#74b9ff,#74b9ff44); }
    .url-list {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 0.24s cubic-bezier(.55,.09,.68,.53), opacity 0.22s;
      margin-bottom: 0.7em;
      padding-left: 1.2em;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .url-list.open {
      opacity: 1;
      max-height: none;
      margin-bottom: 0.7em;
    }
    .url-link-area {
      position: relative;
      display: flex;
      align-items: flex-start; /* å¤‰æ›´: ä¸­èº«ã‚’ä¸Šæƒãˆã« */
      gap: 18px;
      background: #f6f8fa;
      border-radius: 7px;
      /* min-height: 54px; ã‚’å‰Šé™¤ */
      margin-bottom: 0;
      text-decoration: none;
      color: inherit;
      box-shadow: 0 1px 4px #0001;
      padding: 12px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ */
      transition: background 0.15s, box-shadow 0.15s;
    }
    .url-link-area:hover {
      background: #fff;
      box-shadow: 0 2px 12px #eeeeee44;
    }
    body.dark .url-link-area {
      background: #23272f;
      box-shadow: 0 1px 4px #0005;
    }
    body.dark .url-link-area:hover {
      background: #2c2f36;
      box-shadow: 0 2px 12px #eeeeee22;
    }
    .url-thumb {
      width: 65px; height: 65px;
      object-fit: cover;
      border-radius: 7px;
      background: #eee;
      box-shadow: 0 1px 4px #0001;
      margin-right: 2px;
      margin-top: 3px;
    }
    .url-info {
      flex: 1 1 auto;
      min-width: 0;
      margin-right: 2.2em;
    }
    .url-title {
      font-weight: bold;
      font-size: 1.06em;
      margin-bottom: 2px;
      white-space: normal; /* å¤‰æ›´: ãƒ†ã‚­ã‚¹ãƒˆã®æŠ˜ã‚Šè¿”ã—ã‚’è¨±å¯ */
      word-break: break-word; /* è¿½åŠ : é•·ã„å˜èªã§ã‚‚æŠ˜ã‚Šè¿”ã™ */
    }

    .url-desc {
      font-size: 0.98em;
      color: #666;
      white-space: normal; /* å¤‰æ›´: ãƒ†ã‚­ã‚¹ãƒˆã®æŠ˜ã‚Šè¿”ã—ã‚’è¨±å¯ */
      word-break: break-word; /* è¿½åŠ : é•·ã„å˜èªã§ã‚‚æŠ˜ã‚Šè¿”ã™ */
    }
    body.dark .url-desc {
      color: #aaa;
    }
    .bottom-padding { height: 95px; }
    .fav-message-box {
      position: absolute;
      min-width: 180px;
      background: #fff;
      color: #222;
      border-radius: 8px;
      box-shadow: 0 4px 16px #0002;
      border: 1px solid #e0e0e0;
      z-index: 1000;
      padding: 1em 1.2em 1em 1.2em;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 0.18s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .fav-message-title {
      font-weight: bold;
      font-size: 1.1em;
      margin-bottom: 0.7em;
      letter-spacing: 0.03em;
    }
    .fav-message-btns {
      display: flex;
      gap: 1em;
      margin-top: 0.1em;
    }
    .fav-mode-btn {
      padding: 0.35em 1em;
      border-radius: 5px;
      border: 2px solid transparent;
      background: #f4f4f4;
      color: #333;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: border 0.17s, background 0.16s, color 0.16s;
    }
    .fav-mode-btn.on {
      border: 2px solid #FFD600;
      background: #fffbe9;
      color: #c09700;
    }
    .fav-mode-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    body.dark .fav-message-box {
      background: #23272f;
      color: #f8f8f8;
      border: 1px solid #333a44;
      box-shadow: 0 4px 16px #0006;
    }
    body.dark .fav-mode-btn {
      background: #2d3139;
      color: #eee;
    }
    body.dark .fav-mode-btn.on {
      background: #353424;
      color: #FFD600;
      border: 2px solid #FFD600;
    }
    .fixed-buttons {
      position: fixed;
      right: 20px;
      bottom: 22px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 100;
    }
    .fixed-buttons button {
      background: #FFD600;
      color: #222;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      font-size: 1em;
      padding: 0.7em 1.6em;
      cursor: pointer;
      box-shadow: 0 2px 8px #FFD60044;
      transition: background 0.18s, color 0.18s;
    }
    .fixed-buttons button:hover {
      background: #ffeaa7;
      color: #b8860b;
    }
    body.dark .fixed-buttons button {
      background: #FFD600;
      color: #23272f;
    }
    body.dark .fixed-buttons button:hover {
      background: #ffeaa7;
      color: #b8860b;
    }
    /* --- è¿½åŠ : ã‚¿ã‚¤ãƒˆãƒ«ï¼‹ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ä¸­å¤®æƒãˆ --- */
    .main-title-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 0.6em;
      text-align: center;
    }
    .main-title-row .main-title-favicon {
      width: 32px;
      height: 32px;
      display: inline-block;
      vertical-align: middle;
    }
    .main-title-row .main-title-favicon img {
      width: 100%;
      height: 100%;
      border-radius: 8px;
      display: block;
    }
    .main-title-row .main-title-text {
      font-size: 2.0em;
      font-weight: bold;
      letter-spacing: 0.04em;
      line-height: 1.2;
    }
    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .tag-chip {
      background: #e8e8e8;
      color: #333;
      font-size: 0.8em;
      font-weight: 500;
      padding: 3px 8px;
      border-radius: 12px;
      white-space: nowrap;
    }
    body.dark .tag-chip {
      background: #3a414e;
      color: #c9d1d9;
    }
    .filter-controls-area {
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: flex-end;
      flex: 1 1 auto;
    }
    .tag-filter-wrap {
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
    }
    .tag-filter-select {
      font-size: 0.9em;
      padding: 5px 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: #fff;
    }
    .tag-sort-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.7em;
      color: #bbb;
      padding: 0;
      margin: 0;
      display: flex;
      align-items: center;
      transition: color 0.2s, opacity 0.2s;
    }
    .tag-sort-btn.on {
      color: #0984e3;
      text-shadow: 0 0 6px #0984e355;
    }
    .tag-sort-btn svg {
      width: 1em; height: 1em;
      display: block;
    }
    body.dark .tag-filter-select {
      background-color: #2d3139;
      color: #eee;
      border-color: #444;
    }
    body.dark .tag-sort-btn {
      color: #666;
    }
    body.dark .tag-sort-btn.on {
      color: #74b9ff;
      text-shadow: 0 0 6px #74b9ff55;
    }
    /* --- è¿½åŠ : ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« --- */
    .particle {
      position: absolute; /* ç”»é¢ã«å›ºå®šè¡¨ç¤º */
      pointer-events: none; /* ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è‡ªèº«ã¯ã‚¯ãƒªãƒƒã‚¯ã§ããªã„ã‚ˆã†ã« */
      z-index: 9999;
      width: 12px;
      height: 12px;
    }
    .particle.parallelogram {
      width: 10px;
      height: 10px;
      transform: skewX(-20deg); /* å¹³è¡Œå››è¾ºå½¢ */
    }
    .particle.star svg {
      width: 100%;
      height: 100%;
      display: block;
      filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
    }

    @media (max-width: 900px) {
      .main-wrapper { max-width: 97vw; }
    }
    @media (max-width: 600px) {
      .main-wrapper { padding: 0.5em 0.3em 2em 0.3em; }
      .fixed-buttons { right: 6px; }
      .main-title-row { gap: 12px; }
      .main-title-row .main-title-text { font-size: 1.7em; }
    }

    .main-footer {
        width: 100%;
        max-width: 600px;
        text-align: center;
        color: #374151;
        margin-top: 32px;
        margin-bottom: 14px;
        margin-left: auto;  /* è¿½åŠ  */
        margin-right: auto; /* è¿½åŠ  */
    }
    .main-footer a {
        color: #d8971d;
        text-decoration: none;
        transition: color 0.2s ease-in-out;
        font-size: 0.9rem;
    }
    .main-footer a:hover {
        color: #8a580c;
        text-decoration: underline;
    }
    .footer-links {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1.25rem;
        margin-bottom: 0.2rem;
    }
    .footer-copyright {
        font-size: 0.8rem;
        color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="main-wrapper">
    <div class="main-title-row">
      <span class="main-title-favicon"><img src="https://www.google.com/favicon.ico" alt="ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¢ã‚¤ã‚³ãƒ³"></span>
      <span class="main-title-text">shiumai_4 ã®ä½œå“é›†</span>
    </div>
    <div class="favicon-row" id="favicon-row"></div>
    <div class="topbar-flex">
      <div class="dark-toggle">
        <span style="font-size:1.2em; margin-right:4px;">ğŸ”†</span>
        <label class="toggle-switch">
          <input type="checkbox" id="darkModeToggle">
          <span class="toggle-slider"></span>
        </label>
        <span style="font-size:1.2em; margin-left:4px;">ğŸŒ™</span>
      </div>
      <div class="favorite-toggle-area">
        <span class="favorite-toggle-wrap" id="favToggleWrap">
          <button id="favoriteToggleBtn" class="favorite-toggle-btn" title="ãŠæ°—ã«å…¥ã‚Šã®ã¿è¡¨ç¤º">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 17.77L5.18 21.5l1.31-7.66L1.5 9.97l7.76-1.13L12 2.5l2.74 6.34 7.76 1.13-5 4.87 1.31 7.66z"/>
            </svg>
          </button>
        </span>
      </div>
    </div>
    <div id="container"></div>
    <div class="bottom-padding"></div>
  </div>
  <div class="fixed-buttons">
    <button id="closeAllBtn">å…¨ã¦é–‰ã˜ã‚‹</button>
    <button id="toTopBtn">TOPã¸</button>
  </div>

    <footer class="main-footer">
        <div class="footer-links">
            <a href="https://example.com/portfolio" target="_blank" rel="noopener noreferrer">ä½œå“é›†</a>
            <a href="https://x.com/your_x_handle" target="_blank" rel="noopener noreferrer">X</a>
            <a href="https://example.com/privacy-policy" target="_blank" rel="noopener noreferrer">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
            <a href="https://example.com/contact" target="_blank" rel="noopener noreferrer">ãŠå•ã„åˆã‚ã›</a>
        </div>
        <div class="footer-copyright">
            Â©ï¸2025 shiumai_4. All rights reserved.
        </div>
    </footer>

  <script>
    // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
    const favicons = [
      { url: "https://www.youtube.com/@shiumai_4", favicon: "https://www.youtube.com/favicon.ico" },
      { url: "https://x.com/4shiumai?s=21&t=iP-hsmhiY41Q6gEwImzbwA", favicon: "https://twitter.com/favicon.ico" },
      { url: "https://github.com/shiumai-4", favicon: "https://github.com/favicon.ico" },
      { url: "https://discord.gg/BFGAYAQS2P", favicon: "https://github.com/shiumai-4/my_hp/blob/b94331aa022a2b9c8b790b25e175a7d6b57d2f69/discord-icon-svgrepo-com.png?raw=true" },
      { url: "https://note.com/shiumai_4/portal", favicon: "https://note.com/favicon.ico" }
    ];
    // é»„ã€ç·‘ã€é’ã€æ¡ƒã€èµ¤ã€ç´«ã€ç™½ã€æ°´
    const genreColorClass = [ 'genre1', 'genre2', 'genre3', 'genre4', 'genre5', 'genre6', 'genre7', 'genre8' ];
    const data = [
      {
        genre: "ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚²ãƒ¼ãƒ ï¼ˆGoogleSpreadsheetï¼‰",
        colorClass: "genre2",
        urls: [
          {
            title: "ãƒãƒªãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼",
            url: "https://docs.google.com/spreadsheets/d/1pc6tep0FldRxOvIFjf5cenNBfvXJA5FUc40w-EiWV1Y/edit?usp=sharing",
            thumb: "https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png",
            desc: "ãƒ›ãƒ­ãƒ©ã‚¤ãƒ–ï¼šå®é˜ãƒãƒªãƒ³ã‚’ãƒ¢ãƒãƒ¼ãƒ•ã«ã—ãŸã€ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼é¢¨ã®ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["ãƒ‘ã‚ºãƒ«", "ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼", "ãƒ›ãƒ­ãƒ©ã‚¤ãƒ–"]
          },
          {
            title: "ä½™ã®ä¸–ç›´ã—å¤§ä½œæˆ¦ï¼",
            url: "https://docs.google.com/spreadsheets/d/1jdo40wgqaHQlxlTb_mVWYd1yWsH5KMvk1gw2og5PagM/edit?usp=sharing",
            thumb: "https://www.bing.com/th?id=OHR.BingHomepage_FR-FR7279791497_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp",
            desc: "ãƒ›ãƒ­ãƒ©ã‚¤ãƒ–ï¼šç™¾é¬¼ã‚ã‚„ã‚ã‚’ãƒ¢ãƒãƒ¼ãƒ•ã«ã—ãŸã€ãƒ©ã‚¤ãƒ„ã‚¢ã‚¦ãƒˆé¢¨ã®ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["ãƒ‘ã‚ºãƒ«", "ãƒ©ã‚¤ãƒ„ã‚¢ã‚¦ãƒˆ", "ãƒ›ãƒ­ãƒ©ã‚¤ãƒ–"]
          },
          {
            title: "Tic Taco Toe Time!",
            url: "https://docs.google.com/spreadsheets/d/1UdjUmDLIAy6fGwMxcfQyxfyTPXXG0DEpWkTsoujeiJk/edit?usp=sharing",
            thumb: "https://www.bing.com/th?id=OHR.BingHomepage_FR-FR7279791497_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp",
            desc: "ãƒ›ãƒ­ãƒ©ã‚¤ãƒ–ï¼šä¸€ä¼Šé‚£å°“æ –ã‚’ãƒ¢ãƒãƒ¼ãƒ•ã«ã—ãŸã€â—¯Ã—ã‚²ãƒ¼ãƒ é¢¨ã®ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚å¯¾æˆ¦ã‚‚ã‚¢ãƒª",
            tags: ["ãƒ‘ã‚ºãƒ«", "ã€‡Ã—ã‚²ãƒ¼ãƒ ", "å¯¾æˆ¦", "ãƒ›ãƒ­ãƒ©ã‚¤ãƒ–"]
          },
          {
            title: "å‡¡éª¨å±æ©Ÿä¸€é«ª",
            url: "https://docs.google.com/spreadsheets/d/1Pke1rGn-JPKuRVROtK3x6OyqVY5vfzrdbw0zP2KRiwY/edit?usp=sharing",
            thumb: "https://www.bing.com/th?id=OHR.BingHomepage_FR-FR7279791497_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp",
            desc: "éŠæˆ¯ç‹ç³»Youtuberã®å‡¡éª¨çªæ’ƒéƒ¨éšŠã‚’ãƒ¢ãƒãƒ¼ãƒ•ã«ã—ãŸå¯¾æˆ¦å‹ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["å¯¾æˆ¦", "Youtuber"]
          }
        ]
      },
      {
        genre: "WEBã‚²ãƒ¼ãƒ ï¼ˆHTML)",
        colorClass: "genre8",
        urls: [
          {
            title: "ãƒ˜ãƒƒã‚¯ã‚¹ã‚°ãƒªãƒƒãƒ‰ãƒãƒˆãƒ«",
            url: "https://shiumai-4.github.io/hexgridbattle/",
            thumb: "https://www.nicovideo.jp/favicon.ico",
            desc: "æ”»æ’ƒã‚«ãƒ¼ãƒ‰ãŒå°½ããªã„ã‚ˆã†ã«æ•µã‚’å€’ã—ç¶šã‘ã‚‹ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ãƒ¼", "ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ "]
          },
          {
            title: "EvoGame",
            url: "https://shiumai-4.github.io/EvoGame/",
            thumb: "https://www.nicovideo.jp/favicon.ico",
            desc: "å‘³æ–¹ã‚’æ¶ˆã•ã‚Œãªã„ã‚ˆã†ã«Lv1000ã‚’ç›®æŒ‡ã™åŠæ”¾ç½®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³", "æ”¾ç½®ã‚²ãƒ¼ãƒ "]
          },
          {
            title: "Starmida",
            url: "https://shiumai-4.github.io/starmida/",
            thumb: "https://www.nicovideo.jp/favicon.ico",
            desc: "æ˜Ÿã‚’åŒã˜è‰²ã®æ˜Ÿã¾ã§è¾¿ã‚Šç€ã‹ã›ã‚‹ã‚ã¿ã ãã˜é¢¨ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["ãƒ‘ã‚ºãƒ«", "ã‚ã¿ã ãã˜"]
          },
          {
            title: "å¤©ç§¤ã¨ã‚³ã‚¤ãƒ³ã®ã‚²ãƒ¼ãƒ ",
            url: "https://shiumai-4.github.io/scales/",
            thumb: "https://www.nicovideo.jp/favicon.ico",
            desc: "é‡ã•ã‚„ç´ æã®ç•°ãªã‚‹ã‚³ã‚¤ãƒ³ã‚’ã€å¤©ç§¤ã‚„é›»ç£çŸ³ã‚’ä½¿ã£ã¦è¦‹ã¤ã‘ã‚‹ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚",
            tags: ["ãƒ‘ã‚ºãƒ«", "ãƒ­ã‚¸ãƒƒã‚¯"]
          }
        ]
      },
      {
        genre: "ãã®ä»–",
        colorClass: "genre7",
        urls: [
          {
            title: "ã‚¯ã‚¤ã‚ºï¼šã€‡ã€‡ã€‡ã€‡ç©ºå¾Œ",
            url: "https://quiz-maker.site/quiz/play/oDJnNZ20250701025059",
            thumb: "https://quiz-maker.site/favicon.ico",
            desc: "ã€‡ã€‡ã€‡ã€‡ã«å½“ã¦ã¯ã¾ã‚‹è¨€è‘‰ã‚’å½“ã¦ã‚‹ã‚¯ã‚¤ã‚ºã€‚",
            tags: ["ã‚¯ã‚¤ã‚º"]
          },
          {
            title: "shiumai_4ã®ãƒªãƒ³ã‚¯é›†",
            url: "https://shiumai-4.github.io/my_hp/",
            thumb: "https://www.nicovideo.jp/favicon.ico",
            desc: "shiumai_4ãŒä½œã£ãŸè‰²ã€…ãªä½œå“ã‚„é–¢é€£ã™ã‚‹ãƒªãƒ³ã‚¯ã‚’ç´¹ä»‹ã™ã‚‹ã‚µã‚¤ãƒˆã€‚ã“ã®ãƒšãƒ¼ã‚¸ã€‚",
            tags: ["ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª"]
          }
        ]
      }
    ];

    // --- çŠ¶æ…‹ç®¡ç† ---
    let expandedGenres = new Set();
    let showFavOnly = false;
    let showTagOnly = false;
    let selectedTag = '';

    // --- ãŠæ°—ã«å…¥ã‚Šç®¡ç† ---
    function getFavorites() {
      try { return JSON.parse(localStorage.getItem('favorites') || '[]'); } catch { return []; }
    }
    function setFavorites(arr) {
      localStorage.setItem('favorites', JSON.stringify(arr));
    }
    function isFaved(url) {
      return getFavorites().includes(url);
    }
    function toggleFav(url) {
      let favs = getFavorites();
      if (favs.includes(url)) {
        favs = favs.filter(u => u !== url);
      } else {
        favs.push(url);
      }
      setFavorites(favs);
    }

    // --- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³è¡¨ç¤º ---
    const faviconRow = document.getElementById('favicon-row');
    favicons.forEach(item => {
      const a = document.createElement('a');
      a.className = 'favicon-link';
      a.href = item.url;
      a.target = '_blank';
      a.rel = 'noopener noreferrer';
      const img = document.createElement('img');
      img.className = 'favicon-img';
      img.src = item.favicon || '';
      img.alt = 'favicon';
      img.onerror = function() { this.style.display = 'none'; };
      a.appendChild(img);
      faviconRow.appendChild(a);
    });

    // --- ãƒ¡ã‚¤ãƒ³ãƒªã‚¹ãƒˆæç”» ---
    const container = document.getElementById('container');
    function renderList() {
      const prevExpanded = new Set(expandedGenres);
      container.innerHTML = '';
      expandedGenres.clear();
      
      const favs = getFavorites();
      let filteredData = JSON.parse(JSON.stringify(data));

      // ãŠæ°—ã«å…¥ã‚Šãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if (showFavOnly) {
        filteredData = filteredData.map(group => {
          group.urls = group.urls.filter(item => favs.includes(item.url));
          return group;
        }).filter(group => group.urls.length > 0);
      }
      
      // ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if (showTagOnly && selectedTag) {
         filteredData = filteredData.map(group => {
          group.urls = group.urls.filter(item => item.tags && item.tags.includes(selectedTag));
          return group;
        }).filter(group => group.urls.length > 0);
      }

      filteredData.forEach((group, idx) => {
        const genreDiv = document.createElement('div');
        genreDiv.className = 'genre';
        const colorClass = group.colorClass || genreColorClass[idx % genreColorClass.length];
        const header = document.createElement('div');
        header.className = `genre-header ${colorClass}`;
        header.textContent = group.genre;
        header.setAttribute('data-idx', idx);
        const line = document.createElement('div');
        line.className = `genre-line ${colorClass}`;
        const urlList = document.createElement('div');
        urlList.className = 'url-list';

        group.urls.forEach(item => {
          const urlLink = document.createElement('a');
          urlLink.className = 'url-link-area';
          urlLink.href = item.url;
          urlLink.target = '_blank';
          urlLink.rel = 'noopener noreferrer';
          const thumb = document.createElement('img');
          thumb.className = 'url-thumb';
          thumb.src = item.thumb;
          thumb.alt = 'thumbnail';
          const infoDiv = document.createElement('div');
          infoDiv.className = 'url-info';
          const title = document.createElement('div');
          title.className = 'url-title';
          title.textContent = item.title;
          const desc = document.createElement('div');
          desc.className = 'url-desc';
          desc.textContent = item.desc || '';
          infoDiv.appendChild(title);
          infoDiv.appendChild(desc);

          if (item.tags && item.tags.length > 0) {
            const tagsContainer = document.createElement('div');
            tagsContainer.className = 'tags-container';
            item.tags.forEach(tagText => {
              const tagChip = document.createElement('span');
              tagChip.className = 'tag-chip';
              tagChip.textContent = tagText;
              tagsContainer.appendChild(tagChip);
            });
            infoDiv.appendChild(tagsContainer);
          }

          urlLink.appendChild(thumb);
          urlLink.appendChild(infoDiv);
          const favBtn = document.createElement('button');
          favBtn.type = 'button';
          favBtn.className = 'favorite-btn' + (isFaved(item.url) ? ' faved' : '');
          favBtn.title = isFaved(item.url) ? "ãŠæ°—ã«å…¥ã‚Šè§£é™¤" : "ãŠæ°—ã«å…¥ã‚Šè¿½åŠ ";
          favBtn.innerHTML = `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17.77L5.18 21.5l1.31-7.66L1.5 9.97l7.76-1.13L12 2.5l2.74 6.34 7.76 1.13-5 4.87 1.31 7.66z"/></svg>`;
          favBtn.addEventListener('click', function(e) {
            e.preventDefault(); e.stopPropagation();
            const isAdding = !isFaved(item.url); // â˜…ãƒˆã‚°ãƒ«å‰ã«çŠ¶æ…‹ã‚’ç¢ºèª
            toggleFav(item.url);

            // â˜…ãŠæ°—ã«å…¥ã‚Šè¿½åŠ æ™‚ã®ã¿ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’èµ·å‹•
            if (isAdding) {
              launchParticles({ target: this });
            }

            this.classList.toggle('faved', isFaved(item.url));
            this.title = isFaved(item.url) ? "ãŠæ°—ã«å…¥ã‚Šè§£é™¤" : "ãŠæ°—ã«å…¥ã‚Šè¿½åŠ ";
            updateFavToggleBtn();
            if(showFavOnly) renderList();
          });
          urlLink.appendChild(favBtn);
          urlList.appendChild(urlLink);
        });

        genreDiv.appendChild(header);
        genreDiv.appendChild(urlList);
        genreDiv.appendChild(line);
        container.appendChild(genreDiv);

        const globalIdx = getGlobalGenreIndex(group.genre);
        let shouldOpen = prevExpanded.has(globalIdx) || expandedGenres.has(globalIdx) || showFavOnly || showTagOnly;

        if (shouldOpen) {
          urlList.classList.add('open');
          urlList.style.opacity = 1;
          urlList.style.maxHeight = urlList.scrollHeight + "px";
          header.classList.add('shrink');
          header.classList.add(colorClass);
          expandedGenres.add(globalIdx);
          urlList.addEventListener('transitionend', function handler(e) {
            if (e.propertyName === 'max-height' && urlList.classList.contains('open')) {
              urlList.style.maxHeight = "none";
              urlList.removeEventListener('transitionend', handler);
            }
          });
        }
        
        header.addEventListener('click', () => {
          const isOpen = urlList.classList.contains('open');
          if (isOpen) {
            urlList.style.maxHeight = urlList.scrollHeight + "px";
            requestAnimationFrame(() => {
              urlList.style.maxHeight = "0";
              urlList.style.opacity = 0;
            });
            urlList.classList.remove('open');
            header.classList.remove('shrink', colorClass);
            expandedGenres.delete(globalIdx);
          } else {
            urlList.classList.add('open');
            urlList.style.maxHeight = "0";
            requestAnimationFrame(() => {
              urlList.style.maxHeight = urlList.scrollHeight + "px";
              urlList.style.opacity = 1;
            });
            header.classList.add('shrink', colorClass);
            expandedGenres.add(globalIdx);
          }
        });
      });
    }

    function getGlobalGenreIndex(genreName) {
      return data.findIndex(group => group.genre === genreName);
    }

    // --- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ---
    const favoriteToggleArea = document.querySelector('.favorite-toggle-area');
    favoriteToggleArea.classList.add('filter-controls-area');
    favoriteToggleArea.classList.remove('favorite-toggle-area');
    
    // ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    const tagFilterWrap = document.createElement('div');
    tagFilterWrap.className = 'tag-filter-wrap';
    
    const tagSelect = document.createElement('select');
    tagSelect.className = 'tag-filter-select';
    
    const allTags = new Set(data.flatMap(g => g.urls.flatMap(u => u.tags || [])));
    tagSelect.innerHTML = '<option value="">å…¨ã¦ã®ã‚¿ã‚°</option>';
    allTags.forEach(tag => {
      tagSelect.innerHTML += `<option value="${tag}">${tag}</option>`;
    });
    
    selectedTag = tagSelect.value;
    tagSelect.addEventListener('change', (e) => {
      selectedTag = e.target.value;
      if (showTagOnly) renderList();
    });

    const tagSortBtn = document.createElement('button');
    tagSortBtn.className = 'tag-sort-btn';
    tagSortBtn.title = "ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿";
    tagSortBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/></svg>`;
    tagSortBtn.addEventListener('click', () => {
      showTagOnly = !showTagOnly;
      tagSortBtn.classList.toggle('on', showTagOnly);
      renderList();
    });
    
    tagFilterWrap.appendChild(tagSelect);
    tagFilterWrap.appendChild(tagSortBtn);
    favoriteToggleArea.prepend(tagFilterWrap);

    // ãŠæ°—ã«å…¥ã‚Šãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    const favToggleBtn = document.getElementById('favoriteToggleBtn');
    const favToggleWrap = document.getElementById('favToggleWrap');
    let favMsgBox = null;

    function updateFavToggleBtn() {
      favToggleBtn.classList.toggle('on', showFavOnly);
    }

    favToggleBtn.addEventListener('click', (e) => {
      const isActivating = !showFavOnly; // â˜…ãƒˆã‚°ãƒ«å‰ã«çŠ¶æ…‹ã‚’ç¢ºèª
      showFavOnly = !showFavOnly;
      
      // â˜…ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœ‰åŠ¹åŒ–æ™‚ã«ãŠæ°—ã«å…¥ã‚ŠãŒã‚ã‚Œã°ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«èµ·å‹•
      if (isActivating && getFavorites().length > 0) {
        launchParticles({
          target: e.currentTarget,
          shape: 'star',
          count: getFavorites().length * 2,
          spread: 220, // ä¸ŠåŠåˆ†ã«ãƒ©ãƒ³ãƒ€ãƒ 
          startAngle: -220 // å·¦ã‹ã‚‰å³ã¸
        });
      }

      updateFavToggleBtn();
      renderList();
    });

    // --- ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ ---
    document.getElementById('closeAllBtn').addEventListener('click', () => {
      document.querySelectorAll('.url-list.open').forEach(list => {
          const header = list.parentElement.querySelector('.genre-header');
          list.style.maxHeight = "0";
          list.style.opacity = "0";
          list.classList.remove('open');
          if (header) {
              genreColorClass.forEach(c => header.classList.remove('shrink', c));
          }
      });
      expandedGenres.clear();
    });

    document.getElementById('toTopBtn').addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // --- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ ---
    const darkToggle = document.getElementById('darkModeToggle');
    const darkMode = localStorage.getItem('darkMode') === 'true';
    document.body.classList.toggle('dark', darkMode);
    darkToggle.checked = darkMode;
    darkToggle.addEventListener('change', function() {
      document.body.classList.toggle('dark', this.checked);
      localStorage.setItem('darkMode', String(this.checked));
    });

    // --- åˆæœŸæç”» ---
    renderList();
    updateFavToggleBtn();

    window.addEventListener('storage', () => {
      renderList();
      updateFavToggleBtn();
      const newDarkMode = localStorage.getItem('darkMode') === 'true';
      document.body.classList.toggle('dark', newDarkMode);
      darkToggle.checked = newDarkMode;
    });

    // --- è¿½åŠ : ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ ---
    const particleContainer = document.createElement('div');
    // ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã—ã€æç”»é ˜åŸŸã‚’ç”»é¢å…¨ä½“ã«å›ºå®š
    particleContainer.style.position = 'fixed';
    particleContainer.style.top = '0';
    particleContainer.style.left = '0';
    particleContainer.style.width = '100vw';
    particleContainer.style.height = '100vh';
    particleContainer.style.pointerEvents = 'none';
    particleContainer.style.zIndex = '9999';
    document.body.appendChild(particleContainer);
    let particles = [];

    function launchParticles(options = {}) {
      const {
        target,
        count = 5,
        shape = 'parallelogram',
        spread = 0, // 0 for fixed directions
        startAngle = -85 // -90 is top, so -85 is top+5deg
      } = options;

      const rect = target.getBoundingClientRect();
      const originX = rect.left + rect.width / 2;
      const originY = rect.top + rect.height / 2;
      const isDark = document.body.classList.contains('dark');
      const baseHue = isDark ? 55 : 35; // é»„è‰² or ã‚ªãƒ¬ãƒ³ã‚¸

      for (let i = 0; i < count; i++) {
        const p = document.createElement('div');
        p.classList.add('particle', shape);
        
        const randomLightness = 50 + (Math.random() - 0.5) * 20; // 40-60%
        const particleColor = `hsl(${baseHue + (Math.random() - 0.5) * 10}, 100%, ${randomLightness}%)`;

        if (shape === 'star') {
          const starSVG = `<svg viewBox="0 0 24 24" fill="${particleColor}"><path d="M12 17.77L5.18 21.5l1.31-7.66L1.5 9.97l7.76-1.13L12 2.5l2.74 6.34 7.76 1.13-5 4.87 1.31 7.66z"/></svg>`;
          p.innerHTML = starSVG;
        } else {
          p.style.background = particleColor;
        }
        
        particleContainer.appendChild(p);

        const angle = (spread > 0) 
          ? startAngle + Math.random() * spread 
          : startAngle + i * (360 / count);
          
        const angleRad = angle * (Math.PI / 180);
        const initialSpeed = 4 + Math.random() * 6;

        particles.push({
          el: p,
          shape: shape, // å½¢çŠ¶ã‚’ä¿å­˜
          x: originX,
          y: originY,
          vx: Math.cos(angleRad) * initialSpeed,
          vy: Math.sin(angleRad) * initialSpeed,
          life: 1.2,
          rotation: Math.random() * 360,
          rotationSpeed: (Math.random() - 0.5) * 20,
          gravity: 0.05,
          friction: 0.96
        });
      }
      if (particles.length > 0 && !animationRunning) {
        runAnimation();
      }
    }

    let animationRunning = false;
    function runAnimation() {
      animationRunning = true;
      
      particles = particles.filter(p => {
        p.vx *= p.friction;
        p.vy *= p.friction;
        p.vy += p.gravity;
        p.x += p.vx;
        p.y += p.vy;
        p.life -= 1 / 60;
        p.rotation += p.rotationSpeed;

        if (p.life <= 0) {
          p.el.remove();
          return false;
        }
        
        // â˜…å½¢çŠ¶ã«å¿œã˜ã¦transformã‚’æ­£ã—ãè¨­å®š
        let transformString = `translate(${p.x}px, ${p.y}px) rotate(${p.rotation}deg)`;
        if (p.shape === 'parallelogram') {
          transformString += ' skewX(-20deg)';
        }
        p.el.style.transform = transformString;
        p.el.style.opacity = Math.max(0, p.life / 1.5);
        return true;
      });

      if (particles.length > 0) {
        requestAnimationFrame(runAnimation);
      } else {
        animationRunning = false;
      }
    }
  </script>
</body>
</html>
